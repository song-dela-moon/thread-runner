# Thread Runner👟
<img width="750" height="500" alt="스크린샷 2026-02-12 오후 5 17 46" src="https://github.com/user-attachments/assets/76200e6a-50e9-4c1d-99c3-c02cac3403ef" />


**"테일즈런너 넷이서 한마음"** 게임을 구현한 프로젝트입니다. 이 게임은 멀티스레딩을 활용한 레이스 게임으로,  
각 팀원이 협력하여 목표를 달성하는 게임입니다. 각 스팟마다 일정 인원 수가 도달해야 문이 열리며, 팀원 간 협력이 중요한 요소입니다.  

---

## **목차**
- [게임 개요](#게임-개요)
- [게임 룰](#게임-룰)
- [핵심 기능](#핵심-기능)
- [기술 구현](#기술-구현)
- [실행 방법](#실행-방법)

---
## **게임 개요**
이 게임은 8명의 플레이어가 두 팀으로 나누어 **멀티스레딩**을 사용하여 경쟁하며 협력하는 레이스 게임입니다.  
각 팀은 **스팟**을 지나며 문이 열릴 때까지 기다려야 하며, 문을 열고 나면 다음 스팟으로 진행합니다.  

<br>

## **게임 룰**
1. **8명의 플레이어** (2팀, 각 팀 4명)으로 시작합니다.
2. **총 4개의 스팟**이 존재하며, 각 스팟마다 필요한 **인원 수**가 도달해야 문이 열립니다.
   - **첫 번째 스팟**: 1명이 도달해야 문이 열림
   - **두 번째 스팟**: 2명이 도달해야 문이 열림
   - **세 번째 스팟**: 3명이 도달해야 문이 열림
   - **네 번째 스팟**: 4명이 도달해야 문이 열림
3. 각 플레이어는 스레드로 실행되며, 각 스팟에서 **대기**가 발생할 수 있습니다.
4. **문이 열리면** 해당 스팟을 지나서 다른 스팟으로 진행할 수 있습니다.
5. 최종 목표는 **모든 스팟을 지나고 첫 번째로 도착하는 팀**이 승리입니다.

<br>

## **핵심 기능**
- **멀티스레딩**: 각 팀원은 스레드로 실행되고, 각 스레드는 **스팟마다 대기**하면서 협력합니다.
- **동기화**: 각 스팟에 도달해야 할 인원 수가 정확히 맞춰졌을 때만 문이 열리고, 나머지 팀원들은 대기합니다.
- **진행 상황 시각화**: 각 팀원들의 **진행률**과 **대기 상태**가 실시간으로 시각화됩니다.

<br>

## **기술 구현**
### **주요 기술 스택**
- **Java**: 메인 프로그래밍 언어
- **멀티스레딩**: `Thread` 클래스를 사용하여 각 팀원들을 개별 스레드로 실행
- **동기화**: `synchronized` 블록과 `wait()`, `notifyAll()`을 사용하여 팀원 간의 대기 및 진행 동기화

<br>

### **동기화 및 대기 로직**
- 각 스팟에서 **필요 인원 수**가 도달해야 문이 열리고, 도달한 플레이어는 **기다려야 할 팀원들**을 `wait()`으로 대기시킵니다.
- 모든 팀원이 도달하면, **문이 열리고** 대기 중인 팀원들은 `notifyAll()`로 깨워집니다.

<br>

### **진행 상태 시각화**
- 진행 상태는 **진행률 바**로 시각화되며, 각 팀원의 상태와 순위가 실시간으로 표시됩니다.

<br>
  
### 렌더링 및 성능 최적화  
- **독립적 구조**: 렌더링 스레드와 게임 로직을 분리해 메인 로직의 지연 없이 초당 10회의 화면 갱신을 수행합니다.  
- **실시간 대시보드**: 공유 객체(playerProgress)에서 데이터를 읽어 실시간 진행도를 UI로 구축합니다.  
- **선택적 업데이트**: ANSI 이스케이프 코드를 활용, 데이터가 변경된 특정 행만 수정하여 화면 깜빡임을 최소화했습니다.  

<br>

### 렌더링 방식 전환
- **기존 방식**: 갱신 시마다 로고와 8개 바 전체를 재출력하여 데이터 전송량이 많고 깜빡임이 심했습니다.  
- **개선 방식**: 초기 1회 로고 출력 후, 커서를 해당 행으로 이동시켜 변경된 라인만 덮어쓰는 방식을 도입했습니다.  
- **성능 향상**: 총 시스템 호출(System Call) 횟수가 2,751회에서 1,134회로 약 **58%** 감소했습니다.
---

## 실행 방법  
### 1. 클론 받기  
```bash
git clone https://github.com/HeeYeon-Ko/thread-runner.git  
``` 
### 2. 빌드 및 실행  
#### [방법 1] Windows / Eclipse 사용 시  
1. Eclipse의 Workspace를 README.md가 있는 최상위 폴더(`thread-runner`)로 지정하여 엽니다.  
2. [File] -> [Import...] -> [Existing Maven Projects]를 선택합니다.  
3. Root Directory를 최상위 폴더 내부의 `thread_runner` 디렉토리로 선택하여 프로젝트를 불러옵니다.  
4. 프로젝트 우클릭 -> [Export...] -> [Java] -> [Runnable JAR file]을 선택합니다.  
5. Launch configuration에서 'Main - thread_runner'를 선택하고 저장 경로를 지정하여 내보냅니다.  
6. 생성된 .jar 파일을 더블 클릭하거나 `java -jar 파일명.jar` 명령어로 실행합니다.  

#### [방법 2] Maven이 설치된 경우  
```bash
mvn exec:java -Dexec.mainClass="thread_runner.Main" -q  
```

### 3. **게임 플레이**
* 8명의 플레이어가 각 팀에 배정되어 시작됩니다.
* 진행되는 동안 각 스팟에서 대기하고, 문이 열리면 다음 스팟으로 진행합니다.
* 가장 먼저 도착한 팀원의 팀이 승리합니다.
<img width="750" height="500" alt="스크린샷 2026-02-12 오후 5 18 34" src="https://github.com/user-attachments/assets/d7071251-8a85-4505-8e31-c349a472e9c3" />
